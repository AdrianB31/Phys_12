<!DOCTYPE html>
<html lang="en">

<title>PHYS S-12: Intro to Digital Fabrication </title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="../style.css" rel="stylesheet">


<nav class="navbar navbar-expand-sm navbar-dark" style=" color: #EEE7E8;">
  <div style="align-items: center; justify-content: center;" class="container-fluid">
    <div class="flexrow">
      <h1 class="nav-title">PHYS S-12: Summer 2025</h1>
    </div>
    <div class="navbar-nav">
      <h4><a class="nav-link" href="../index.html">Home</a></h4>
      <h4><a class="nav-link" href="../about.html">About</a></h4>
    </div>
  </div>
</nav>

<body>
<xmp style="display:none;">
<div class="textcontainer">
<p class="margin"></p>

<h3>Final Project: A Portable Medical Incubator </h3>
<h4>Why Create a Portable Incubator?</h4>
The underlying motivation for creating a portbale incubator is to showcase the opportunities available for medical accessability. The incubator is essential for growing organisms in order to diagnose bacterial disease, with the intent to distribute antibiotics to the patient. Currently, the market for portable incubators show a price range between ~$1000 to ~$5000. Although this price range is viewed as affordable in advanced nations accustomed to high medical standards, poor nations—or even poor regions within an advanced economy—are likely not able to take advantage of the most current medical technologies due to the constant strain of balancing finanical priorities. Therefore, my final project showcased that utilziing the most simpliest and cheapest components can yield a functional incubator that enhances medical accessability. 
<br>
<br>
<h4>Creation Process</h4>
Even though the incubator consisted of a box, which was learned in week 1, the final project slowly began to develop during the microcontroller programming week. During this week, I learned I2C communication and how to intergrate a sensor into the OLED display. The following week, in the 3D design module, I designed a fan to disperse the oxgyen within the incubator. 
<p class="margin">   </p>
    <div class="center-colum">
      <img src="./display.jpeg" alt="Display" width="500"> 
      <img src="./p1.jpeg" alt="Circuit Diagram" width="500">
      <img src="./p2.jpeg" alt="Circuit Diagram" width="500">
      <img src="./grill.jpeg" alt="Circuit Diagram" width="500">
<br>
<br>
Thereafter, I committed myself to dedicated the remaining weekly assignments to align with my final project. As such, the electronic inputs module provided an excellent opportunity to learn how to setup and conduct reading experiments with a thermistor. 
<br>
<br>
<h4>Minimum Viable Product</h4>
Below is the first draft of what I intially thought the incubator could look like. My thinking was to have a hinged door with an LED strip above to indicate whether the door was opened or closed. Furthermore, I showed a crude method of installing the thermistor by creating a hole during the 3D print to read the inside temperature. 
<p class="margin">   </p>
    <div class="center-colum">
      <img src="./v1.jpeg" alt="Incubator" width="500">
      <img src="./v2.jpeg" alt="Incubator" width="500">
      <img src="./v3.jpeg" alt="Incubator" width="500">
<br>
<br>
<h4>Final Product</h4>
Below are the components combined to make up the incubator. Surprisingly, the heat plates allowed the temperature to reach a high of 38.5 C. However, during the presentation fair, the wooden wall warped outwards due to the constant heat.  
<p class="margin">   </p>
    <div class="center-colum">
      <img src="./label.jpeg" alt="Circuit Diagram" width="500">
      <img src="./f1.jpeg" alt="Display" width="500"> 
      <img src="./f2.jpeg" alt="Circuit Diagram" width="500">
      <img src="./f3.jpeg" alt="Circuit Diagram" width="500">
      <img src="./f4.jpeg" alt="Circuit Diagram" width="500">
      <img src="./f5.jpeg" alt="Circuit Diagram" width="500">
<br>
<br>
<h4>Software</h4>
Here is the code that I utilized for the incubator to function. The code enables the OLED display to show the interior temperature in real-time, the VL53l0x proximity sensor to show the current status of the incubator of whether the door is opened or closed, as well as the heating pads and fan to be on or off depending on if the door is opened or closed. 
<pre><code class="language-arduino">
#include Wire.h
#include Adafruit_VL53L0X.h
#include Adafruit_NeoPixel.h
#include "max6675.h"
#include Adafruit_GFX.h
#include Adafruit_SSD1306.h

// --- Configuration ---
#define LED_PIN         25
#define NUM_LEDS        10

#define UPPER_THRESHOLD 90 // Distance in mm for the door to be considered open

#define SCREEN_WIDTH 128
#define SCREEN_HEIGHT 64
#define OLED_RESET -1

// VL53L0X I2C pins
#define VL53L0X_SDA_PIN 21 //Purple = VNC; Black = GND; Gray = SCL; White = SDA
#define VL53L0X_SCL_PIN 22

// MAX6675 SPI pins
#define MAX6675_SO_PIN 17
#define MAX6675_CS_PIN 18
#define MAX6675_SCK_PIN 19

// Heating pad control pins
#define HEATING_PAD_1_PIN 34
#define HEATING_PAD_2_PIN 35

// DC Motor control pin
#define MOTOR_PIN       32

// --- Global Variables ---
Adafruit_VL53L0X lox = Adafruit_VL53L0X();
Adafruit_NeoPixel strip(NUM_LEDS, LED_PIN, NEO_GRB + NEO_KHZ800);
Adafruit_SSD1306 display(SCREEN_WIDTH, SCREEN_HEIGHT, &Wire, OLED_RESET);
MAX6675 thermocouple(MAX6675_SCK_PIN, MAX6675_CS_PIN, MAX6675_SO_PIN);

// Variables for sensor data and state
bool doorState = false; // false = closed, true = open
int distance = 0;
float temp = 0;

// Millis variables for non-blocking timing
unsigned long previousMillis = 0;
const long updateInterval = 100;

void setup() {
  Serial.begin(115200);

  // --- Initialize all peripherals ---
  // VL53L0X sensor
  Wire.begin(VL53L0X_SDA_PIN, VL53L0X_SCL_PIN);
  if (!lox.begin()) {
    Serial.println("Failed to boot VL53L0X");
    while (1);
  }

  // OLED display
  if(!display.begin(SSD1306_SWITCHCAPVCC, 0x3c)) {
    Serial.println(F("SSD1306 allocation failed"));
    for(;;);
  }
  display.clearDisplay();
  display.setTextColor(WHITE);

  // LED strip
  strip.begin();
  strip.show();

  // Configure heating pad pins as outputs
  pinMode(HEATING_PAD_1_PIN, OUTPUT);
  pinMode(HEATING_PAD_2_PIN, OUTPUT);

  // Configure motor pin as an output
  pinMode(MOTOR_PIN, OUTPUT);

  // Ensure heating pads and motor are OFF at startup
  digitalWrite(HEATING_PAD_1_PIN, LOW);
  digitalWrite(HEATING_PAD_2_PIN, LOW);
  digitalWrite(MOTOR_PIN, LOW);
}

void loop() {
  unsigned long currentMillis = millis();

  if (currentMillis - previousMillis >= updateInterval) {
    previousMillis = currentMillis;

    // --- Read Sensors ---
    VL53L0X_RangingMeasurementData_t measure;
    lox.rangingTest(&measure, false);
    
    // Explicitly check for the "out of range" status.
    // RangeStatus == 4 means the sensor could not get a valid reading.
    if (measure.RangeStatus != 4) {
      distance = measure.RangeMilliMeter;
    } else {
      // The sensor is out of range, set a specific distance value
      // to handle this state.
      distance = -1; 
    }

    temp = thermocouple.readCelsius();

    // --- Update LED, OLED, and Actuator States ---
    if (distance > UPPER_THRESHOLD || distance == -1) {
      // Door is open
      doorState = true;
      strip.fill(strip.Color(255, 0, 0), 0, NUM_LEDS); // Red LEDs
      strip.show();

      // Turn heating pads OFF and motor OFF
      digitalWrite(HEATING_PAD_1_PIN, LOW);
      digitalWrite(HEATING_PAD_2_PIN, LOW);
      digitalWrite(MOTOR_PIN, LOW);
    } else {
      // Door is closed
      doorState = false;
      strip.fill(strip.Color(0, 255, 0), 0, NUM_LEDS); // Green LEDs
      strip.show();

      // Turn heating pads ON and motor ON
      digitalWrite(HEATING_PAD_1_PIN, HIGH);
      digitalWrite(HEATING_PAD_2_PIN, HIGH);
      digitalWrite(MOTOR_PIN, HIGH);
    }

    // --- Update OLED Display ---
    display.clearDisplay();
    display.setTextSize(1);
    display.setCursor(0, 0);
    display.println("Dr. Incubator");
    display.println("-----------------");

    display.print("Temp: ");
    display.print(temp);
    display.println(" C");

    display.print("Door Status: ");
    if (doorState) {
      display.println("Open");
    } else {
      display.println("Closed");
    }

    if (doorState) {
      display.setTextSize(1);
      display.setCursor(5, 55);
      display.println("Close Door!");
      display.setCursor(5, 45);
      display.println("Immediately");
    } else {
      display.setTextSize(2);
      display.setCursor(30, 40);
      display.println("OKAY");
    }

    display.display();
  }
}
</code></pre> 
<br>
<br>
<h4>CAD Models Used</h4>
Below are the Fusion files that were used during the creation process. I also used the sliding box from  <a href="https://en.makercase.com/#/">Makercase</a> as the outer wooden shell for the final interation. 
<br>
<iframe src="https://myg338979.autodesk360.com/shares/public/SH30dd5QT870c25f12fcf3f1df25bb93b833?mode=embed" width="640" height="480" allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true"  frameborder="0"></iframe>
<iframe src="https://myg338979.autodesk360.com/shares/public/SH30dd5QT870c25f12fcb7aede2bb635fc74?mode=embed" width="640" height="480" allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true"  frameborder="0"></iframe>
<iframe src="https://myg338979.autodesk360.com/shares/public/SH30dd5QT870c25f12fcf06463cc949cfea1?mode=embed" width="640" height="480" allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true"  frameborder="0"></iframe>
<iframe src="https://myg338979.autodesk360.com/shares/public/SH30dd5QT870c25f12fcb986d86a72c9e72b?mode=embed" width="640" height="480" allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true"  frameborder="0"></iframe>
<iframe src="https://myg338979.autodesk360.com/shares/public/SH30dd5QT870c25f12fc27b33e6e377256b1?mode=embed" width="640" height="480" allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true"  frameborder="0"></iframe>
<br>
<br>
<h4>Hardware Used</h4>
<br>
<br>
<h4>Refinements Moving Forward</h4>
</div>
</xmp>
</body>

<script src="../strapdown.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" ></script>

</html>